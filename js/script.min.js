!function(){"use strict";angular.module("galleryApp",["ngRoute","ngAnimate","cfp.loadingBarInterceptor"]),angular.module("galleryApp").config(["cfpLoadingBarProvider",function(n){n.includeSpinner=!0,n.includeBar=!0}]),angular.module("galleryApp").directive("loading",["$http",function(a){return{restrict:"A",link:function(n,t,e){n.isLoading=function(){return 0<a.pendingRequests.length},n.$watch(n.isLoading,function(n){n?e.$addClass("main-loading"):e.$removeClass("main-loading")})}}}]),angular.module("galleryApp").config(["$routeProvider","$httpProvider",function(n,t){n.when("/home",{templateUrl:"views/home.html.tmpl",controller:"galleryPhotosController"}),n.when("/favorites",{templateUrl:"views/favorites.html.tmpl",controller:"favoritesController"}),n.when("/random",{templateUrl:"views/random.html.tmpl",controller:"randomPhotoController"}),n.when("/404/",{templateUrl:"views/404.html.tmpl"}),n.otherwise({redirectTo:"/home"}),t.interceptors.push("httpRequestInterceptor")}]),angular.module("galleryApp").filter("setSize",function(){var e=/https:\/\/picsum\.photos\/id\/[0-9]+\/*/i;return function(n,t){return e.test(n)?n.match(e)+t:n}})}(),function(){"use strict";angular.module("galleryApp").controller("favoritesController",["$scope",function(n){n.ids=n.favoritesIds,n.photosUrl=function(n){var t,e,a=[];for(t=0;t<n.length;t++)e=n[t],a.push("https://picsum.photos/id/"+e+"/1200/1200");return a.reverse()}(n.ids),n.zoomImageOverlayHide()}])}(),function(){"use strict";angular.module("galleryApp").controller("galleryPhotosController",["$scope","apiPhotosService","localstorageService",function(e,n,t){var a="";function o(){e.currentPage=t.get("currentPage",1),e.currentLimit=t.get("currentLimit",30),n.getPhotos(e.currentPage,e.currentLimit).then(function(n){e.photos=n.data}),e.favoritesIds=t.getObject("favIds"),e.zoomImageOverlayHide()}e.displayViewSizes=[300,900],e.currentSize=e.displayViewSizes[0]?e.displayViewSizes[0]:300,e.favoritesIds=[],o(),e.toggleView=function(){var n=e.displayViewSizes.indexOf(e.currentSize),t=e.displayViewSizes.length-1;0===n?a="up":n===t&&(a="down"),"up"===a?n++:"down"===a&&n--,e.currentSize=e.displayViewSizes[n]},e.setActiveCount=function(n,t){n.target.classList.contains("active")||(document.querySelector(".num-photo.active").classList.remove("active"),n.target.classList.add("active"),e.changeAmount(t))},e.changeAmount=function(n){e.currentLimit=n,t.set("currentLimit",e.currentLimit),o()},e.isActiveCount=function(n){if(n===+e.currentLimit)return"active"},e.changePage=function(n){n?e.currentPage++:e.currentPage--,t.set("currentPage",e.currentPage),o()}}])}(),function(){"use strict";angular.module("galleryApp").controller("mainController",["$scope","$location","localstorageService",function(o,t,e){o.favoritesIds=e.getObject("favIds"),o.isFavorite=function(n){if(-1!==o.favoritesIds.indexOf(n))return"color-red favorited"},o.zoomImage=function(n,t){var e=n.target.getAttribute("src"),a=n.target.getAttribute("prev_src");n.target.classList.contains("zoomed-img")?(n.target.setAttribute("src",a),n.target.removeAttribute("prev_src"),n.target.classList.remove("zoomed-img"),o.zoomImageOverlayHide(),setTimeout(function(){n.target.classList.add("allow-transition")},100)):(n.target.setAttribute("prev_src",e),n.target.setAttribute("src",t),o.zoomImageOverlayShow(),setTimeout(function(){n.target.classList.add("zoomed-img"),n.target.classList.remove("allow-transition")},500))},o.toggleFavorite=function(n,t){n.target.classList.contains("favorited")?(n.target.classList.remove("color-red,favorited"),o.favoritesIds.splice(o.favoritesIds.indexOf(t),1)):(n.target.classList.add("color-red,favorited"),o.favoritesIds.push(t)),e.setObject("favIds",o.favoritesIds)},o.closeOverlay=function(){document.querySelector(".zoomed-img").click()},o.isActiveRoute=function(n){return t.path()===n?"active-route":""},o.zoomImageOverlayShow=function(){o.overlay=!0,document.querySelector("body").classList.add("stop-scroll")},o.zoomImageOverlayHide=function(){o.overlay=!1,document.querySelector("body").classList.remove("stop-scroll")}}])}(),function(){"use strict";angular.module("galleryApp").controller("randomPhotoController",["$scope","apiPhotosService",function(t,n){function e(n,t){return Math.floor(Math.random()*(t-n))+n}t.init=function(){t.randPhoto=0,n.getPhotos(e(1,10),100).then(function(n){t.randPhoto=n.data[e(1,100)]}),t.zoomImageOverlayHide()},t.init()}])}(),function(){"use strict";angular.module("galleryApp").factory("apiPhotosService",["$http",function(e){var n={getPhotos:function(n,t){return e.get("https://picsum.photos/v2/list?page="+n+"&limit="+t)}};return n}])}(),function(){"use strict";angular.module("galleryApp").factory("httpRequestInterceptor",["$q","$location",function(t,e){return{responseError:function(n){return 404===n.status&&e.path("/404/"),t.reject(n)}}}])}(),function(){"use strict";angular.module("galleryApp").factory("localstorageService",["$window",function(e){return{set:function(n,t){e.localStorage[n]=t},get:function(n,t){return e.localStorage[n]||t||!1},setObject:function(n,t){e.localStorage[n]=JSON.stringify(t)},getObject:function(n){return JSON.parse(e.localStorage[n]||"[]")}}}])}(),angular.module("app.templates",["app/index.html","app/views/404.html.tmpl","app/views/favorites.html.tmpl","app/views/home.html.tmpl","app/views/random.html.tmpl"]),angular.module("app/index.html",[]).run(["$templateCache",function(n){n.put("app/index.html",'<!DOCTYPE html>\n<html lang="en" data-ng-app="galleryApp">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="description" content="Free photo gallery">\n    <meta name="keywords" content="HTML,CSS,XML,JavaScript">\n    <meta name="author" content="Denys Maruzhenko">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>Gallery</title>\n\n    <link rel="icon" type="image/png" href="assets/img/favicon.png">\n\n    \x3c!-- Fonts --\x3e\n    <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">\n    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">\n    \x3c!-- Icons --\x3e\n    <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">\n    \x3c!-- Main css file --\x3e\n    <link rel="stylesheet" type="text/css" href="../dist/css/styles.min.css">\n\n    \x3c!-- Angular libs --\x3e\n    <script src="../dist/js/assets.min.js"><\/script>\n    \x3c!-- Main js file --\x3e\n    <script src="../dist/js/script.min.js"><\/script>\n\n</head>\n\n<body data-ng-controller="mainController">\n    <div class="overlay-all overlay-fade" data-ng-if="overlay">\n        <span class="lnr lnr-chevron-left" data-ng-click="closeOverlay()" title="Back"></span>\n    </div>\n    <header>\n        <nav class="header-navigation">\n            <a href="#!random" class="color-gradient" data-ng-class="isActiveRoute(\'/random\')">\n                <div>\n                    <span class="lnr lnr-question-circle"></span>\n                </div>\n                random\n            </a>\n            <a href="#!home" class="logo" data-ng-class="isActiveRoute(\'/home\')">\n                Gallery\n                <div class="logo-descript">Just pictures, and fun</div>\n            </a>\n            <a href="#!favorites" class="color-red" data-ng-class="isActiveRoute(\'/favorites\')">\n                <div>\n                    <span class="lnr lnr-heart"></span>\n                </div>\n                favorites\n            </a>\n        </nav>\n    </header>\n    <main data-loading>\n        <div class="main-section">\n            <ng-view></ng-view>\n        </div>\n    </main>\n\n</body>\n\n</html>')}]),angular.module("app/views/404.html.tmpl",[]).run(["$templateCache",function(n){n.put("app/views/404.html.tmpl",'<div class="not-found-page">\n    <div class="inl-blck border-right">\n        <span class="not-found-error">404</span>\n    </div>\n    <div class="inl-blck">\n        <div>\n            <span class="lnr lnr-sad"></span>\n        </div>\n        <div>\n            <span class="not-found-text">Oh...Something went wrong, please try again later.</span>\n        </div>\n    </div>\n</div>\n')}]),angular.module("app/views/favorites.html.tmpl",[]).run(["$templateCache",function(n){n.put("app/views/favorites.html.tmpl",'<ng-container data-ng-if="photosUrl.length > 0" class="fade">\n    <div class="photo-section" data-ng-repeat="url in photosUrl" data-ng-init="photosUrl = []">\n        <ng-container data-ng-click="zoomImage($event, url)">\n            <img data-ng-src="{{ url | setSize: 300 }}" src="#" alt="Favorite photo" class="allow-transition">\n        </ng-container>\n    </div>\n</ng-container>\n<div class="no-data color-default" data-ng-if="!photosUrl.length">\n    No favorite photos found.\n</div>\n')}]),angular.module("app/views/home.html.tmpl",[]).run(["$templateCache",function(n){n.put("app/views/home.html.tmpl",'<ng-container data-ng-if="photos.length > 0" class="fade">\n    <div class="submenu-wrapper" id="pagination-anchor">\n        <div class="toggle-photo-view no-user-select" title="Change display view" data-ng-click="toggleView()" data-ng-if="displayViewSizes.length && displayViewSizes.length != 1"\n        data-ng-class="toggleSize == 2 ? \'ico-more\' : \'ico-less\' ">\n            <div class="submenu-header">Change display view:</div>\n            <span class="lnr lnr-picture" data-ng-repeat="size in displayViewSizes track by $index"\n            data-ng-class="currentSize == size ? \'active\' : \'\'"></span>\n        </div>\n        <div class="number-settings-wrapper no-user-select">\n            <div class="submenu-header">Number of photos on the page:</div>\n            <span class="num-photo" data-ng-class="isActiveCount(10)" data-ng-click="setActiveCount($event, 10)">10</span>\n            <span class="num-photo" data-ng-class="isActiveCount(30)" data-ng-click="setActiveCount($event, 30)">30</span>\n            <span class="num-photo" data-ng-class="isActiveCount(100)" data-ng-click="setActiveCount($event, 100)">100</span>\n        </div>\n    </div>\n    <div class="pagination-wrapper">\n        <div class="pag-item no-user-select" data-ng-if="currentPage != 1" data-ng-click="changePage(increment = false)">\n            <span class="lnr lnr-arrow-left pag-icon"></span>\n            <span class="pag-text">Previous</span>\n        </div>\n        <div class="pag-item no-user-select" data-ng-click="changePage(increment = true)" data-ng-if="currentPage<10">\n            <span class="pag-text">Next</span>\n            <span class="lnr lnr-arrow-right pag-icon"></span>\n        </div>\n    </div>\n    <div class="photo-section" data-ng-repeat="photo in photos" data-ng-init="photos = []">\n        <div>\n            <ng-container data-ng-click="zoomImage($event, photo.download_url)" class="fade">\n                <img data-ng-src="{{ photo.download_url | setSize:currentSize }}" src="#" alt="Photo, author - {{photo.author}}, link - {{photo.url}}" class="allow-transition">\n            </ng-container>\n        </div>\n        <div class="photo-description">\n            <span class="photo-author w-80">\n                <a ng-href="{{photo.url}}" href="#" target="_blank">\n                    {{ photo.author }}\n                </a>\n            </span>\n            <span class="lnr lnr-heart color-default w-10 no-user-select" data-ng-class="isFavorite(photo.id)"\n            data-ng-click="toggleFavorite($event, photo.id)"></span>\n        </div>\n    </div>\n    <div class="pagination-wrapper">\n        <div class="pag-item no-user-select" data-ng-if="currentPage != 1" data-ng-click="changePage(increment = false)">\n            <span class="lnr lnr-arrow-left pag-icon"></span>\n            <span class="pag-text">Previous</span>\n        </div>\n        <div class="pag-item no-user-select" data-ng-click="changePage(increment = true)" data-ng-if="currentPage<10">\n            <span class="pag-text">Next</span>\n            <span class="lnr lnr-arrow-right pag-icon"></span>\n        </div>\n    </div>\n</ng-container>\n<div class="no-data color-default" data-ng-if="!photos.length">\n    No photos found\n</div>\n')}]),angular.module("app/views/random.html.tmpl",[]).run(["$templateCache",function(n){n.put("app/views/random.html.tmpl",'<div class="get-rand-photo-wrapper">\n    <span class="get-another-random color-gradient" data-ng-click="init()">\n        <span class="lnr lnr-sync"></span>\n        Get another random photo\n    </span>\n</div>\n\n<ng-container data-ng-if="randPhoto" class="fade">\n    <div class="photo-section">\n        <ng-container data-ng-click="zoomImage($event, randPhoto.download_url)">\n            <img data-ng-src="{{ randPhoto.download_url | setSize:500 }}" src="#" alt="Photo, author - {{randPhoto.author}}, link - {{randPhoto.url}}" class="allow-transition">\n        </ng-container>\n        <div class="photo-description">\n            <span class="photo-author w-80">\n                <a ng-href="{{randPhoto.url}}" href="#" target="_blank">\n                    {{ randPhoto.author }}\n                </a>\n            </span>\n            <span class="lnr lnr-heart color-default w-10 no-user-select" data-ng-class="isFavorite(randPhoto.id)"\n            data-ng-click="toggleFavorite($event, randPhoto.id)"></span>\n        </div>\n    </div>\n</ng-container>\n\n<div class="no-data color-default" data-ng-if="!randPhoto">\n    No photos found\n</div>\n')}]);