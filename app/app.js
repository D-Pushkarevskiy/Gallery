function deletePhotoUrlSize(url){return!!url&&(changedInp=url.split("/"),changedInp.splice(-2,2),url=changedInp.join("/"))}galleryApp=angular.module("galleryApp",["ngRoute","ngAnimate"]).config(function($routeProvider){$routeProvider.when("/home",{templateUrl:"views/home.html",controller:"galleryPhotosController"}),$routeProvider.when("/favorites",{templateUrl:"views/favorites.html",controller:"favoritesController"}),$routeProvider.when("/random",{templateUrl:"views/random.html",controller:"randomPhotoController"}),$routeProvider.otherwise({redirectTo:"/home"})}),galleryApp.config(function($httpProvider,$routeProvider){$httpProvider.interceptors.push("httpRequestInterceptor"),$routeProvider.when("/404/",{templateUrl:"views/404.html"})}),galleryApp.controller("mainController",function($scope,$location,localstorageService){$scope.favoritesIds=localstorageService.getObject("favIds"),$scope.isFavorite=function(id){if(-1!=$scope.favoritesIds.indexOf(id))return"color-red favorited"},$scope.zoomImage=function(event,FullSizePhotoUrl){currentSrc=event.target.getAttribute("src"),event.target.classList.contains("zoomed-img")?(prevSrc=event.target.getAttribute("prev_src"),event.target.setAttribute("src",prevSrc),event.target.removeAttribute("prev_src"),event.target.classList.remove("zoomed-img"),$scope.zoomImageOverlay(allow=!1),setTimeout(function(){event.target.classList.add("allow-transition")},100)):(event.target.setAttribute("prev_src",currentSrc),event.target.setAttribute("src",FullSizePhotoUrl),$scope.zoomImageOverlay(allow=!0),setTimeout(function(){event.target.classList.add("zoomed-img"),event.target.classList.remove("allow-transition")},500))},$scope.toggleFavorite=function(event,id){event.target.classList.contains("favorited")?(event.target.classList.remove("color-red,favorited"),$scope.favoritesIds.splice($scope.favoritesIds.indexOf(id),1)):(event.target.classList.add("color-red,favorited"),$scope.favoritesIds.push(id)),localstorageService.setObject("favIds",$scope.favoritesIds)},$scope.closeOverlay=function(){document.querySelector(".zoomed-img").click()},$scope.isActiveRoute=function(routeName){return $location.path()===routeName?"activeRoute":""},$scope.zoomImageOverlay=function(state){state?($scope.overlay=!0,document.querySelector("body").classList.add("stop-scroll")):($scope.overlay=!1,document.querySelector("body").classList.remove("stop-scroll"))}}),galleryApp.controller("randomPhotoController",function($scope,apiPhotosService){function getRandomInt(min,max){return Math.floor(Math.random()*(max-min))+min}$scope.init=function(){$scope.randPhoto=0,apiPhotosService.getPhotos(getRandomInt(1,10),100).then(function(response){$scope.randPhoto=response.data[getRandomInt(1,100)]}),$scope.zoomImageOverlay(allow=!1)},$scope.init()}),galleryApp.controller("favoritesController",function($scope){$scope.ids=$scope.favoritesIds,$scope.photosUrl=function(ids){for(photosUrl=[],index=0;index<ids.length;index++)id=ids[index],photosUrl.push("https://picsum.photos/id/"+id+"/1200/1200");return photosUrl.reverse()}($scope.ids),$scope.zoomImageOverlay(allow=!1)}),galleryApp.controller("galleryPhotosController",function($scope,apiPhotosService,localstorageService){function init(){$scope.currentPage=localstorageService.get("currentPage",1),$scope.currentLimit=localstorageService.get("currentLimit",30),apiPhotosService.getPhotos($scope.currentPage,$scope.currentLimit).then(function(response){$scope.photos=response.data}),$scope.favoritesIds=localstorageService.getObject("favIds"),$scope.zoomImageOverlay(allow=!1)}$scope.toggleSize=2,$scope.viewSize="ico-more",$scope.favoritesIds=[],init(),$scope.toggleView=function(){3===$scope.toggleSize?($scope.toggleSize--,$scope.viewSize="ico-more"):($scope.toggleSize++,$scope.viewSize="ico-less")},$scope.setActiveCount=function(event,amount){event.target.classList.contains("active")||(document.querySelector(".active").classList.remove("active"),event.target.classList.add("active"),$scope.changeAmount(amount))},$scope.changeAmount=function(amount){$scope.currentLimit=amount,localstorageService.set("currentLimit",$scope.currentLimit),init()},$scope.isActiveCount=function(amount){if(amount===+$scope.currentLimit)return"active"},$scope.changePage=function(increment){increment?$scope.currentPage++:$scope.currentPage--,localstorageService.set("currentPage",$scope.currentPage),init(),$scope.jumpToAnchor()},$scope.jumpToAnchor=function(){offsTop=document.getElementById('pagination-anchor').offsetTop,window.scrollTo(0,offsTop)}}),galleryApp.filter("minimizeSize",function(){return function(url){return(url=deletePhotoUrlSize(url))+"/300/300"}}),galleryApp.filter("mediumSize",function(){return function(url){return(url=deletePhotoUrlSize(url))+"/500/500"}}),galleryApp.filter("largeSize",function(){return function(url){return(url=deletePhotoUrlSize(url))+"/800/800"}});